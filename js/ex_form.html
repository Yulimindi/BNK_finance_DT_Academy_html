<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #err_username {
            color: red;
        }
    </style>
</head>
<body>
    <form name="frm">
        <label for="username">Username</label>
        <input type="text" name="username" id="username" required><br>
        <div id="err_username"></div>
        
        <hr>

        <input type="checkbox" name="hobby" value="reading">독서
        <input type="checkbox" name="hobby" value="coding">코딩<br>

        <hr>
        <labelfor id="job">직업</label>
        <select name="job" id="job">
            <option value="select">--select--</option>
            <option value="developer">개발자</option>
            <option value="designer">디자이너</option>
            <option value="manager">관리자</option>
        </select><br>
        <input type="submit" value="send">


        
    </form>
        

    <script>
        const err = document.querySelector('#err_username');
        const frm = document.querySelector('form[name="frm"]');

        const txt_username = document.querySelector("input[name='username']");
        
        txt_username.addEventListener('focus', () => console.log('모두 나를 주목해'));
        txt_username.addEventListener('blur', () => console.log('블러링 할게용'));

        const hobbyList = document.querySelectorAll('input[name="hobby"]');

        // hobbyList.forEach(element => {
        //     element.addEventListener('change', (e) => {
        //         console.log(e.target.value, e.target.checked);
        //     })
        // })

        const sel_job = document.querySelector("#job");

        // sel_job.addEventListener('change', (e) => {
        //         console.log(e.target.value);

        //         if(e.target.value == '--select--') {
        //             alert('직업을 선택해주세요!');
        //         }
        // })

        frm.addEventListener('change', (e) => {
            if(e.target.name === 'hobby') {
                let arr = [];
                const checked = frm.querySelectorAll("input[name='hobby']:checked");
                checked.forEach((chk) => arr.push(chk.value));
                console.log(arr);
            }
        })

        frm.addEventListener('submit', (e) => { 
            e.preventDefault(); // submit이 발생하면 기본 기능을 차단하라

            // 유효성 검사 하고 올바르면 폼을 전송하라!
            if(txt_username.value.length < 4) {
                err.textContent = '글자 수가 부족합니다!';
                return;
            }


            if(sel_job.value == '--select--' || sel_job.value == undefined) {
                alert('직업을 선택해주세요!');
                return;
            }

            // if(e.target.name == 'job') {
            //     if(sel_job.value == '--select--') {
            //         alert('직업을 선택해주세요!');
            //         return;
            //     }
            // }

            frm.submit(); // 강제 폼 전송
        })

        


    </script>

</body>
</html>